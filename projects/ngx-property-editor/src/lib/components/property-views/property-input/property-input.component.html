<ng-container *ngIf="configuration && !configuration.separator && !configuration.isHidden(data, mode)">

  <ng-container
    *ngIf="configuration.propertyType == 'boolean' || configuration.propertyType == 'boolean-indeterminate'">
    <pe-boolean-input [id]="configuration.propertyName || id"
                      [name]="configuration.propertyName"
                      [noFormGroup]="noFormGroup"
                      [label]="configuration.getLabel(data, mode)"
                      [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                      [readonly]="readonly"
                      [disabled]="!readonly && !configuration.isEditable(data, mode)"
                      [required]="configuration.isRequired(data, mode)"
                      [allowIndeterminate]="configuration.propertyType == 'boolean-indeterminate'"
                      [value]="configuration.getValue(data, mode)"
                      (valueChange)="configuration.setValue(data, $event)">
    </pe-boolean-input>
  </ng-container>

  <ng-container
    *ngIf="configuration.propertyType == 'date' || configuration.propertyType == 'datetime' || configuration.propertyType == 'time' || configuration.propertyType == 'month'">
    <pe-date-input [id]="configuration.propertyName || id"
                   [name]="configuration.propertyName"
                   [noFormGroup]="noFormGroup"
                   [label]="configuration.getLabel(data, mode)"
                   [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                   [readonly]="readonly"
                   [disabled]="!readonly && !configuration.isEditable(data, mode)"
                   [required]="configuration.isRequired(data, mode)"
                   [type]="configuration.propertyType == 'datetime' ? 'datetime-local' : configuration.propertyType"
                   [value]="configuration.getValue(data, mode)"
                   (valueChange)="configuration.setValue(data, $event)">
    </pe-date-input>
  </ng-container>

  <ng-container *ngIf="configuration.propertyType == 'number'">
    <pe-number-input [id]="configuration.propertyName || id"
                     [name]="configuration.propertyName"
                     [noFormGroup]="noFormGroup"
                     [label]="configuration.getLabel(data, mode)"
                     [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                     [readonly]="readonly"
                     [disabled]="!readonly && !configuration.isEditable(data, mode)"
                     [required]="configuration.isRequired(data, mode)"
                     [value]="configuration.getValue(data, mode)"
                     (valueChange)="configuration.setValue(data, $event)">
    </pe-number-input>
  </ng-container>

  <ng-container
    *ngIf="configuration.propertyType == 'string' || configuration.propertyType == 'id'">
    <pe-text-input [id]="configuration.propertyName || id"
                   [name]="configuration.propertyName"
                   [noFormGroup]="noFormGroup"
                   [label]="configuration.getLabel(data, mode)"
                   [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                   [readonly]="readonly"
                   [disabled]="!readonly && !configuration.isEditable(data, mode)"
                   [required]="configuration.isRequired(data, mode)"
                   [autocompleteList]="configuration.getDataSource(data, mode)"
                   [trimValue]="true"
                   [value]="configuration.getValue(data, mode)"
                   (valueChange)="configuration.setValue(data, $event)">
    </pe-text-input>
  </ng-container>

  <ng-container
    *ngIf="configuration.propertyType == 'password' || configuration.propertyType == 'tel' || configuration.propertyType == 'email' || configuration.propertyType == 'url' || configuration.propertyType == 'color'">
    <pe-text-input [id]="configuration.propertyName || id"
                   [name]="configuration.propertyName"
                   [noFormGroup]="noFormGroup"
                   [label]="configuration.getLabel(data, mode)"
                   [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                   [readonly]="readonly"
                   [disabled]="!readonly && !configuration.isEditable(data, mode)"
                   [required]="configuration.isRequired(data, mode)"
                   [type]="configuration.propertyType"
                   [trimValue]="configuration.propertyType !== 'password'"
                   [value]="configuration.getValue(data, mode)"
                   (valueChange)="configuration.setValue(data, $event)">
    </pe-text-input>
  </ng-container>

  <ng-container *ngIf="configuration.propertyType == 'string-multiline'">
    <pe-text-area-input [id]="configuration.propertyName || id"
                        [name]="configuration.propertyName"
                        [noFormGroup]="noFormGroup"
                        [label]="configuration.getLabel(data, mode)"
                        [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                        [readonly]="readonly"
                        [disabled]="!readonly && !configuration.isEditable(data, mode)"
                        [required]="configuration.isRequired(data, mode)"
                        [value]="configuration.getValue(data, mode)"
                        (valueChange)="configuration.setValue(data, $event)">
    </pe-text-area-input>
  </ng-container>

  <ng-container *ngIf="configuration.propertyType == 'rating'">
    <pe-rating-input [id]="configuration.propertyName || id"
                     [name]="configuration.propertyName"
                     [noFormGroup]="noFormGroup"
                     [label]="configuration.getLabel(data, mode)"
                     [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                     [readonly]="readonly"
                     [disabled]="!readonly && !configuration.isEditable(data, mode)"
                     [required]="configuration.isRequired(data, mode)"
                     [value]="configuration.getValue(data, mode)"
                     (valueChange)="configuration.setValue(data, $event)">
    </pe-rating-input>
  </ng-container>

  <ng-container *ngIf="configuration.propertyType == 'select'">
    <pe-select-input [id]="configuration.propertyName || id"
                     [name]="configuration.propertyName"
                     [noFormGroup]="noFormGroup"
                     [label]="configuration.getLabel(data, mode)"
                     [placeholder]="noFormGroup ? configuration.getLabel(data, mode) : undefined"
                     [readonly]="readonly"
                     [disabled]="!readonly && !configuration.isEditable(data, mode)"
                     [required]="configuration.isRequired(data, mode)"
                     [dataSource]="configuration.getDataSource(data, mode)"
                     [valuePropertyName]="configuration.valuePropertyName"
                     [displayPropertyName]="configuration.displayPropertyName"
                     [multiple]="configuration.isArray"
                     [allowEmpty]="!configuration.isRequired(data, mode)"
                     [value]="configuration.getValue(data, mode)"
                     (valueChange)="configuration.setValue(data, $event)">
    </pe-select-input>
  </ng-container>

  <ng-container *ngIf="configuration.propertyType == 'button'">
    <button ngb-btn [id]="configuration.propertyName || id"
                    [class.mb-3]="!noFormGroup"
                    [buttonClass]="'btn-secondary btn-block'"
                    [disabled]="!configuration.isEditable(data, mode)"
                    [text]="configuration.getLabel(data, mode)"
                    [ngbTooltip]="configuration.getRouterLinkTooltip(data, mode)"
                    (click)="onButtonClick($event)">
    </button>
  </ng-container>

</ng-container>
